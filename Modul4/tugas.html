<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toko Elektronik Cepat</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fef3f3;
      margin: 0;
      padding: 20px;
    }
    header {
      text-align: center;
      background-color: #ffcc00;
      padding: 20px;
      border-radius: 10px;
    }
    #jam {
      font-weight: bold;
      font-size: 1.1em;
      margin-top: 10px;
    }
    .container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    .produk-display {
      background-color: #fff0f5;
      border-radius: 10px;
      padding: 20px;
    }
    .produk-list {
      background-color: #e0ffff;
      padding: 20px;
      border-radius: 10px;
      height: fit-content;
    }
    .produk-item {
      cursor: pointer;
      margin-bottom: 10px;
      padding: 5px;
      background-color: #fff;
      border-radius: 5px;
    }
    .produk-item:hover {
      background-color: #ffffcc;
    }
    .form-pesan {
      background-color: #f5f5dc;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 20px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 0 5px;
    }
    button:hover {
      background-color: #45a049;
    }
    #output {
      background-color: #ffffe0;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
    }
    img {
      width: 100%;
      max-height: 300px;
      object-fit: contain;
      border-radius: 10px;
    }
  </style>
</head>
<body onload="init()">
  <header>
    <h1>Toko Elektronik Cepat</h1>
    <div id="jam">Memuat waktu...</div>
  </header>

  <div class="container">
    <div class="produk-display">
      <img id="gambar-produk" src="" alt="Produk">
      <div style="text-align:center; margin: 10px 0;">
        <button onclick="gantiGambar(-1)">Previous</button>
        <button onclick="gantiGambar(1)">Next</button>
      </div>
      <h2 id="nama-produk"></h2>
      <p id="harga-produk"></p>
    </div>
    <div class="produk-list" id="daftar-produk"></div>
  </div>

  <div class="form-pesan">
    <h3>Form Pemesanan</h3>
    <input type="text" id="namaPemesan" placeholder="Nama Pemesan">
    <input type="number" id="jumlahPesan" placeholder="Jumlah">
    <input type="text" id="kodePromo" placeholder="Kode Promo (opsional)">
    <button onclick="pesanSekarang()">Pesan Sekarang</button>
  </div>

  <div id="output"></div>

  <script>
    const produk = [
      {
        nama: "Kipas Angin Mini",
        harga: 135000,
        gambar: [
          "model kipas angin mini.jpg",
          "Kipas Angin Mini.jpg"
        ]
      },
      {
        nama: "Lampu LED Pintar",
        harga: 200000,
        gambar: [
          "model lampu led pintar.jpg",
          "tampilan lampu led pintar.jpg"
        ]
      },
      {
        nama: "Speaker Bluetooth",
        harga: 110000,
        gambar: [
          "speaker bluetooth.jpg",
          "panduan mic speaker bluetooth.jpg"
        ]
      }
    ];

    let indexProduk = 0;
    let indexGambar = 0;

    function init() {
      tampilkanJam();
      setInterval(tampilkanJam, 1000);
      renderProduk();
      tampilkanProduk(indexProduk);
    }

    function tampilkanJam() {
      const now = new Date();
      const waktu = now.toLocaleString('id-ID');
      document.getElementById("jam").innerText = `Waktu Transaksi: ${waktu}`;
    }

    function renderProduk() {
      const daftar = document.getElementById("daftar-produk");
      daftar.innerHTML = "";
      produk.forEach((p, i) => {
        const item = document.createElement("div");
        item.className = "produk-item";
        item.innerText = p.nama;
        item.onclick = () => tampilkanProduk(i);
        daftar.appendChild(item);
      });
    }

    function tampilkanProduk(i) {
      indexProduk = i;
      indexGambar = 0;
      const p = produk[i];
      document.getElementById("gambar-produk").src = p.gambar[indexGambar];
      document.getElementById("nama-produk").innerText = p.nama;
      document.getElementById("harga-produk").innerText = `Harga: Rp ${p.harga.toLocaleString('id-ID')}`;
    }

    function gantiGambar(arah) {
      indexGambar += arah;
      const gambarArray = produk[indexProduk].gambar;
      if (indexGambar >= gambarArray.length) indexGambar = 0;
      if (indexGambar < 0) indexGambar = gambarArray.length - 1;
      document.getElementById("gambar-produk").src = gambarArray[indexGambar];
    }

    function pesanSekarang() {
      const nama = document.getElementById("namaPemesan").value.trim();
      const jumlah = parseInt(document.getElementById("jumlahPesan").value);
      const kode = document.getElementById("kodePromo").value.trim().toUpperCase();
      const produkDipilih = produk[indexProduk];
      let output = document.getElementById("output");

      if (!nama || isNaN(jumlah) || jumlah <= 0) {
        output.innerHTML = "<p style='color:red;'>Nama dan jumlah harus diisi dengan benar!</p>";
        return;
      }

      const subtotal = produkDipilih.harga * jumlah;
      let potongan = 0;
      if (kode === "DISKON10") {
        potongan = subtotal * 0.1;
      }
      const total = subtotal - potongan;
      const orderId = `INV-${Math.floor(10000 + Math.random() * 90000)}`;

      output.innerHTML = `
        <h3>Struk Pemesanan</h3>
        <p>Order ID: <b>${orderId}</b></p>
        <p>Nama Pemesan: <b>${nama}</b></p>
        <p>Produk: <b>${produkDipilih.nama}</b></p>
        <p>Jumlah: <b>${jumlah}</b></p>
        <p>Subtotal: Rp <b>${subtotal.toLocaleString('id-ID')}</b></p>
        <p>Potongan: Rp <b>${potongan.toLocaleString('id-ID')}</b></p>
        <p>Total Akhir: Rp <b>${total.toLocaleString('id-ID')}</b></p>
      `;
    }
  </script>
</body>
</html>